{% extends "layout.html" %}
{% block title %}{{ book.book_name }}{% endblock %}
{% block content %}
<div class="container">
  <div class="row">
    <div class="col-md-12">
      <h2 class="title">{{ book.book_name }}</h2>
      <table class="beebook-table-info">
        <tr>
          <td><b>Name: </b></td>
          <td>{{ book.book_name }}</td>
        </tr>
        <tr>
          <td><b>Authors: </b></td>
          <td>{{ (', ').join(authors) }}</td>
        </tr>
        <tr>
          <td><b>Release Year: </b></td>
          <td>{{ book.release_year }}</td>
        </tr>
        <tr>
          <td><b>Explanation: </b></td>
          <td>{{ book.explanation }}</td>
        </tr>
      </table>

      <div class="table-responsive">
        <table id="mytable" class="table table-bordred table-striped">
          <thead>
            <th>Edition Number</th>
            <th>ISBN</th>
            <th>Publisher</th>
            <th>Publish Year</th>
            <th>Number of Pages</th>
            <th>Languages</th>
            <th>Edit</th>
            <th>Delete</th>
          </thead>
          <tbody>
            {% if editions %}
            {% for edition in editions %}
            <tr>
              <td>{{ edition.edition_number }}</td>
              <td>{{ edition.isbn }}</td>
              <td>{{ edition.publisher }}</td>
              <td>{{ edition.publish_year }}</td>
              <td>{{ edition.number_of_pages }}</td>
              <td>{{ edition.language }}</td>
              <td><a href="{{ url_for('book_edition_page', book_id=edition.book_id, edition_number=edition.edition_number) }}/edit"><p title="Edit"><span class="glyphicon glyphicon-pencil btn btn-primary btn-xs"></span></p></a></td>
              <td><a href="{{ url_for('book_edition_page', book_id=edition.book_id, edition_number=edition.edition_number) }}/delete"><p title="Delete"><span class="glyphicon glyphicon-trash btn btn-danger btn-xs"></span></p></a></td>
            </tr>
            {% endfor %}
            {% else %}
            <tr>
              <td colspan="8" style="text-align: center; color: #d70000 ;"><h3>Any edition has been added yet.</h3></td>
            </tr>
            {% endif %}
          </tbody>
        </table>
        <div class="clearfix"></div>
      </div>
    </div>
  </div>
  <div class="container beebook-form">
    {% if err_message_comment %}
    <div class="alert alert-danger" role="alert">
      {{ comment_err_message }}
    </div>
    {% endif %}
    <h2 class="title">Add comment</h2>
    <form action="" method="post" name="add_comment" class="obje-edit-form">
      <div class="form-group">
        <label for="comment_title">Title</label>
        <input type="text" class="form-control" id="comment_title" name="comment_title" placeholder="Title" required="required" value="{{ new_comment_values['comment_title'] }}">
      </div>
      <div class="form-group">
        <label for="comment_statement">Explanation</label>
        <textarea class="form-control" id="comment_statement" name="comment_statement" placeholder="Explanation" rows="3" required="required">{{ new_comment_values['comment_statement'] }}</textarea>
      </div>
      <div class="form-group">
        <label for="rating">Rate</label>
        <select class="form-control" id="rating" name="rating" required="required">
          <option value="0">Select rate...</option>
          {% for i in range(1,6) %}
          {% if i == new_comment_values['rating'] %}
          <option value="{{ i }}" selected>{{ i }}</option>
          {% else %}
          <option value="{{ i }}">{{ i }}</option>
          {% endif %}
          {% endfor %}
        </select>
      </div>
      <button type="submit" class="btn btn-primary">Save</button>
    </form>
  </div>
  <div class="container beebook-comments">
    <h2 class="title">Comments of the book</h2>
      {% for comment in comments %}
      <div class="container beebook-comment">
          <p><b>Customer:</b> {{ comment.customer_id }}</p>
          <p><b>Rate:</b> {{ comment.rating }}</p>
          <p><b>Title:</b> {{ comment.comment_title }}</p>
          <p><b>Explanation:</b><br>{{ comment.comment_statement }}</p>
          <p><b>Updated time:</b>{{ comment.updated_time }}</p>
      </div>
      {% endfor %}
  </div>
</div>
{% endblock %}